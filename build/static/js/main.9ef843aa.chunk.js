(this.webpackJsonpface_detect=this.webpackJsonpface_detect||[]).push([[0],{132:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=132},151:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),o=n(22),a=n.n(o),i=(n(86),n(87),n(34)),s=n(5),u=n(24),l=n.n(u),d=n(39),j=n(8),b=n(25),h=(n(98),n(154)),f=n(155),O=n(156),p=n(157),x=n(3),g=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{style:{color:"#00dd00"},children:"KYC Successfull"}),Object(x.jsx)("big",{children:Object(x.jsx)("p",{children:"Congratulations, Your KYC has been successfully completed"})})]})},m=function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useRef)(null),o=Object(c.useRef)(null),a=Object(c.useState)(!1),i=Object(j.a)(a,2),s=i[0],u=i[1],m=Object(c.useState)(null),v=Object(j.a)(m,2),w=v[0],y=v[1],C=Object(c.useState)(""),k=Object(j.a)(C,2),D=k[0],S=k[1],F=Object(c.useState)(!1),R=Object(j.a)(F,2),U=R[0],L=R[1],P=Object(c.useState)(!1),T=Object(j.a)(P,2),I=T[0],_=T[1],M=Object(c.useState)(!1),E=Object(j.a)(M,2),N=E[0],Y=E[1],A=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.e("./models");case 2:return e.next=4,b.c("./models");case 4:return e.next=6,b.d("./models");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){A().then(console.log("loaded"))}),[]);var B=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.fccf22209d9a90a5cba88f11c7c8bfdb",c="https://eu1.locationiq.com/v1/reverse.php?key=".concat("pk.fccf22209d9a90a5cba88f11c7c8bfdb","&lat=").concat(t,"&lon=").concat(n,"&format=json"),e.next=4,fetch(c).then((function(e){return e.json()})).then((function(e){console.log(e.address),S("".concat(e.address.city,", ").concat(e.address.country,", ").concat(e.address.postcode))})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w&&U&&D){e.next=4;break}alert("Please Upload all required documents"),e.next=15;break;case 4:return e.next=6,b.b(r.current).withFaceLandmarks().withFaceDescriptor();case 6:if(t=e.sent){e.next=10;break}return alert("Face not found in ID"),e.abrupt("return");case 10:return n=new b.a(t),e.next=13,b.b(o.current).withFaceLandmarks().withFaceDescriptor();case 13:(c=e.sent)?"unknown"!==n.findBestMatch(c.descriptor).label?_(!0):q():alert("Face not found in Photo");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){Y(!0)};return Object(x.jsx)("div",{children:I?Object(x.jsx)(g,{}):Object(x.jsxs)(h.a,{fluid:!0,children:[Object(x.jsxs)(f.a,{children:[Object(x.jsx)(O.a,{children:Object(x.jsx)("h3",{children:"Upload ID (jpg/png/jpeg)"})}),Object(x.jsx)(O.a,{children:Object(x.jsx)("input",{type:"file",onChange:function(e){y(e.target.files[0])},name:"document"})}),Object(x.jsx)(O.a,{children:Object(x.jsx)("img",{alt:"ID",ref:r,src:w?URL.createObjectURL(w):null,width:"200",height:"200"})})]}),Object(x.jsx)("br",{}),Object(x.jsxs)(f.a,{children:[Object(x.jsx)(O.a,{children:Object(x.jsx)("h3",{children:"Capture Photo"})}),Object(x.jsx)(O.a,{children:Object(x.jsx)("button",{onClick:function(){s?(console.log("capture"),o.current.getContext("2d").drawImage(t.current,0,0,200,200),n.current.getTracks().forEach((function(e){e.stop()})),L(!0)):(navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then((function(e){t.current.srcObject=e,n.current=e,u(!0)})).catch((function(e){console.error(e),u(!1)})),L(!1))},children:"Capture"})}),Object(x.jsx)(O.a,{children:Object(x.jsxs)("div",{className:"div__photo_child",children:[Object(x.jsx)("video",{className:"photo_video",ref:t,width:"200",height:"200",autoPlay:!0,muted:!0}),Object(x.jsx)("canvas",{className:"photo_canvas",ref:o,width:"200",height:"200"})]})})]}),Object(x.jsx)("br",{}),Object(x.jsxs)(f.a,{children:[Object(x.jsx)(O.a,{children:Object(x.jsx)("h3",{children:"Detect your Location"})}),Object(x.jsx)(O.a,{children:Object(x.jsx)("button",{onClick:function(){navigator.geolocation.getCurrentPosition((function(e){console.log(e),B(e.coords.latitude,e.coords.longitude)}))},children:"Locate Me"})}),Object(x.jsx)(O.a,{children:Object(x.jsx)("input",{placeholder:D,disabled:!0})})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("center",{children:Object(x.jsx)("button",{onClick:K,children:"Verify"})}),Object(x.jsx)(f.a,{children:N?Object(x.jsx)(O.a,{children:Object(x.jsxs)(p.a,{variant:"danger",onClose:function(){return Y(!1)},dismissible:!0,children:[Object(x.jsx)(p.a.Heading,{children:"Oh snap! KYC failed"}),Object(x.jsx)("p",{children:"The Person in ID does not match with the photo. Try Again!"})]})}):null})]})})},v=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(i.b,{to:"/kyc",children:Object(x.jsx)("button",{onClick:function(){},children:"Start KYC"})}),Object(x.jsx)(i.b,{to:"pi",children:Object(x.jsx)("button",{onClick:function(){},children:"Start Personal Interview"})})]})},w=n(79),y=n.n(w),C=n(80),k=n.n(C),D=n(81),S=n.n(D),F=y()("http://localhost:4200"),R=new k.a(void 0);var U=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useState)(null),o=Object(j.a)(r,2),a=o[0],i=o[1],s=Object(c.useState)(null),u=Object(j.a)(s,2),l=u[0],d=u[1],b=Object(c.useState)([]),h=Object(j.a)(b,2),f=h[0],O=h[1];Object(c.useEffect)((function(){R.on("open",(function(e){console.log("Curr user",e),F.emit("join-room",1,e)})),navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:"user"}}).then((function(n){e.current=n,t.current.srcObject=n,t.current.play()})).catch((function(e){alert("There is an error accessing your camera and microphone. If you have not given permissions, please reload and do the needful, it is mandatory.")})),F.on("user-connected",(function(e){i(e),console.log("user aya h",e)})),F.on("user-disconnected",(function(e){alert("User - "+e+" disconnected"),i(null),n.current.pause(),n.current.src=""})),F.on("file-received",(function(e){console.log(f,e),O(e)})),R.on("call",(function(t){window.confirm("Do you want to answer?")?(console.log("Answering a call"),t.answer(e.current),t.on("stream",(function(e){n.current.srcObject=e,n.current.play().catch((function(e){return console.error(e)}))}))):console.log("Called denied")}))}),[]);var p=function(){console.log("Calling",a),R.call(a,e.current).on("stream",(function(e){n.current.srcObject=e,n.current.play().catch((function(e){return console.error(e)}))}))},g=function(e){d(e.target.files[0])},m=function(e){e.preventDefault();var t=new FormData;t.append("file",l),fetch("/file-upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){return F.emit("file-uploaded",e.filename)})).catch((function(e){return console.error(e)}))},v=function(){S()({method:"get",url:"/download/?path="+f,responseType:"blob",headers:{}}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",f),document.body.appendChild(n),n.click()})).catch((function(e){alert(e)}))};return Object(x.jsxs)("div",{children:[Object(x.jsx)("video",{muted:!0,ref:t,style:{width:400,height:280}}),Object(x.jsx)("video",{ref:n,style:{width:750,height:400}}),a?Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:p,children:"Call Agent"}),Object(x.jsx)("hr",{}),Object(x.jsx)("header",{children:Object(x.jsx)("h2",{children:"Upload Documents"})}),Object(x.jsxs)("form",{onSubmit:m,encType:"multipart/form-data",children:[Object(x.jsx)("input",{type:"file",name:"file",onChange:g}),Object(x.jsx)("button",{type:"submit",children:"Submit"})]})]}):Object(x.jsx)(x.Fragment,{}),(console.log("received files are, ",f),0===f.length?Object(x.jsx)(x.Fragment,{}):Object(x.jsx)("div",{children:Object(x.jsxs)("p",{children:[" Received File - ",Object(x.jsx)("button",{onClick:v,children:"Download"})," "]})}))]})};var L=function(){return Object(x.jsx)(i.a,{children:Object(x.jsxs)(s.c,{children:[Object(x.jsx)(s.a,{path:"/",exact:!0,component:v}),Object(x.jsx)(s.a,{path:"/kyc",component:m}),Object(x.jsx)(s.a,{path:"/pi",component:U})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};n(150);a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(L,{})}),document.getElementById("root")),P()},86:function(e,t,n){},87:function(e,t,n){},94:function(e,t){},95:function(e,t){},96:function(e,t){},98:function(e,t,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.9ef843aa.chunk.js.map