{"version":3,"sources":["../node_modules/peerjs/dist sync","components/SuccessKYC.js","components/KYC.js","components/Home.js","components/PI.js","App.js","reportWebVitals.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","SuccessKYC","props","style","color","KYC","videoRef","useRef","streamRef","idImgRef","canvasRef","useState","isVideoOn","setIsVideoOn","idFile","setIdFile","userLocation","setUserLocation","isPhotoCaptured","setIsPhotoCaptured","isKycSuccess","setIsKycSuccess","showError","setShowError","loadModels","a","faceapi","useEffect","then","console","log","reverseGeolocate","lat","long","url","fetch","res","json","data","address","city","country","postcode","catch","checkKyc","alert","current","withFaceLandmarks","withFaceDescriptor","det1","matcher","det2","findBestMatch","descriptor","label","showKYCError","Container","fluid","Row","Col","type","onChange","target","files","name","alt","ref","src","URL","createObjectURL","width","height","onClick","getContext","drawImage","getTracks","forEach","track","stop","navigator","mediaDevices","getUserMedia","video","facingMode","stream","srcObject","err","error","className","autoPlay","muted","geolocation","getCurrentPosition","pos","coords","latitude","longitude","placeholder","disabled","Alert","variant","onClose","dismissible","Heading","Home","to","socket","io","myPeer","Peer","undefined","PI","myStream","myVideoRef","otherVideoRef","userId","setUserId","file","setFile","receivedFiles","setReceivedFiles","on","emit","audio","play","pause","filename","call","window","confirm","answer","Call","onChangeHandler","event","handleDocumentUpload","preventDefault","FormData","append","method","body","handleDownload","axios","responseType","headers","Blob","link","document","createElement","href","setAttribute","appendChild","click","onSubmit","encType","length","App","path","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9ef843aa.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 132;","import React from 'react'\n\n/**\n* @author\n* @function SuccessKYC\n**/\n\nexport const SuccessKYC = (props) => {\n  return(\n    <div>\n      <h1 style={{color:\"#00dd00\"}}>KYC Successfull</h1>\n      <big><p>Congratulations, Your KYC has been successfully completed</p></big>\n    </div>\n   )\n\n }","import React, { useEffect, useRef, useState } from 'react'\nimport * as faceapi from 'face-api.js'\nimport './KYC.css'\nimport { Alert, Col, Container, Row } from 'react-bootstrap'\nimport { SuccessKYC } from './SuccessKYC'\n\n/**\n* @author\n* @function KYC\n**/\n\nexport const KYC = (props) => {\n\n    // refs\n    const videoRef = useRef(null)\n    const streamRef = useRef(null)\n    const idImgRef = useRef(null)\n    const canvasRef = useRef(null)\n\n    //states\n    const [isVideoOn, setIsVideoOn] = useState(false)\n    const [idFile, setIdFile] = useState(null)\n    const [userLocation, setUserLocation] = useState(\"\")\n    const [isPhotoCaptured, setIsPhotoCaptured] = useState(false)\n    const [isKycSuccess, setIsKycSuccess] = useState(false)\n    const [showError, setShowError] = useState(false)\n\n    const loadModels = async () => {\n        await faceapi.loadSsdMobilenetv1Model('./models')\n        await faceapi.loadFaceLandmarkModel('./models')\n        await faceapi.loadFaceRecognitionModel('./models')\n    }\n\n    useEffect(() => {\n        loadModels().then(console.log(\"loaded\"))\n    }, [])\n\n    const changeFile = (e) => {\n        setIdFile(e.target.files[0])\n    }\n\n    const capturePic = () => {\n        if (isVideoOn) {\n            console.log(\"capture\")\n            canvasRef.current.getContext('2d').drawImage(videoRef.current, 0, 0, 200, 200)\n            streamRef.current.getTracks().forEach(track => {\n                track.stop()\n            });\n            setIsPhotoCaptured(true)\n        } else {\n            navigator.mediaDevices.getUserMedia({video: { facingMode: \"user\" } })\n                .then(function(stream) {\n                    videoRef.current.srcObject = stream\n                    streamRef.current = stream\n                    setIsVideoOn(true)\n                })\n                .catch(function(err) {\n                    console.error(err)\n                    setIsVideoOn(false)\n                });\n\n            setIsPhotoCaptured(false)\n        }\n    }\n\n    const reverseGeolocate = async (lat, long) => {\n        const LOCATION_API_KEY = \"pk.fccf22209d9a90a5cba88f11c7c8bfdb\"\n        const url = `https://eu1.locationiq.com/v1/reverse.php?key=${LOCATION_API_KEY}&lat=${lat}&lon=${long}&format=json`\n        await fetch(url)\n            .then(res => res.json())\n            .then(data => {\n                console.log(data.address)\n                setUserLocation(`${data.address.city}, ${data.address.country}, ${data.address.postcode}`)\n            })\n            .catch(e => console.log(e))\n    }\n\n    const getGeolocation = () => {\n        navigator.geolocation.getCurrentPosition((pos) => {\n            console.log(pos)\n            reverseGeolocate(pos.coords.latitude, pos.coords.longitude)\n        })\n    }\n\n    const checkKyc = async () => {\n        if (!idFile || !isPhotoCaptured || !userLocation) {\n            alert(\"Please Upload all required documents\")\n        } else {\n            const det1 = await faceapi.detectSingleFace(idImgRef.current).withFaceLandmarks().withFaceDescriptor()\n\n            if (!det1) {\n                alert(\"Face not found in ID\")\n                return\n            }\n\n            const matcher = new faceapi.FaceMatcher(det1)\n\n            const det2 = await faceapi.detectSingleFace(canvasRef.current).withFaceLandmarks().withFaceDescriptor()\n\n            if (det2) {\n                const match = matcher.findBestMatch(det2.descriptor)\n                // console.log(\"detections in id = \", det1, det2, \" = \", match)\n                // alert(match.toString())\n                if(match.label !== 'unknown') setIsKycSuccess(true)\n                else showKYCError()\n            } else alert(\"Face not found in Photo\")\n        }\n    }\n\n\n    const showKYCError = () => {\n        setShowError(true)\n    }\n\n\n    return (\n        <div>{ isKycSuccess ? <SuccessKYC/> : \n            <Container fluid>\n                <Row>\n                    <Col><h3>Upload ID (jpg/png/jpeg)</h3></Col>\n                    <Col><input type=\"file\" onChange={changeFile} name=\"document\" /></Col>\n                    <Col><img alt=\"ID\" ref={idImgRef} src={idFile ? URL.createObjectURL(idFile) : null} width=\"200\" height=\"200\" /></Col>\n                </Row>\n                <br/>\n                <Row>\n                    <Col><h3>Capture Photo</h3></Col>\n                    <Col><button onClick={capturePic}>Capture</button></Col>\n                    <Col>\n                        <div className=\"div__photo_child\">\n                            <video className=\"photo_video\" ref={videoRef} width=\"200\" height=\"200\" autoPlay muted></video>\n                            <canvas className=\"photo_canvas\" ref={canvasRef} width=\"200\" height=\"200\"></canvas>\n                        </div>\n                    </Col>\n                </Row>\n                <br/>\n                <Row>\n                    <Col><h3>Detect your Location</h3></Col>\n                    <Col><button onClick={getGeolocation}>Locate Me</button></Col>\n                    <Col><input placeholder={userLocation} disabled/></Col>\n                </Row>\n                <br/>\n                <br/>\n                <center><button onClick={checkKyc}>Verify</button></center>\n                <Row>\n                    { showError ? <Col>\n                        <Alert variant=\"danger\" onClose={() => setShowError(false)} dismissible>\n                        <Alert.Heading>Oh snap! KYC failed</Alert.Heading>\n                        <p>\n                        The Person in ID does not match with the photo. Try Again! \n                        </p>\n                    </Alert>\n                    </Col> : null}\n                </Row>\n            </Container >\n        }</div>\n        // <div className=\"container\">\n        //     <h1>Automatic KYC</h1>\n        //     <div className=\"div__id\">\n        // <p>Upload ID (jpg/png/jpeg)</p>\n        // <form action=\"/file-upload\" enctype=\"multipart/form-data\" method=\"post\">\n        //     <input type=\"file\" onChange={changeFile} name=\"document\"/>\n        //     <img ref={idImgRef} src={idFile ? URL.createObjectURL(idFile) : null} width=\"200\" height=\"200\"/>\n        // </form>\n        //     </div>\n\n        //     <div className=\"div__photo\">\n\n        // <p>Capture </p>\n        // <div className=\"div__photo_child\">\n        //     <video className=\"photo_video\" ref={videoRef} width=\"200\" height=\"200\" autoPlay muted></video>\n        //     <canvas className=\"photo_canvas\" ref={canvasRef} width=\"200\" height=\"200\"></canvas>\n        // </div>\n        //     </div>\n        // <button onClick={capturePic}>Capture</button>\n\n        //     <div className=\"div__location\">\n        // <p>{userLocation}</p>\n        // <button onClick={getGeolocation}>Locate Me</button>\n        //     </div>\n\n        //     <button onClick={checkKyc}>Verify</button>\n        // </div>\n    )\n\n}","import React from 'react'\nimport { Link } from 'react-router-dom'\n\n/**\n* @author\n* @function Home\n**/\n\nexport const Home = (props) => {\n\n  const startKYC = () => {\n\n}\n\nconst startPI = () => {\n\n}\n  return(\n    <div>\n        <Link to='/kyc'><button onClick={startKYC}>Start KYC</button></Link>\n        <Link to='pi'><button onClick={startPI}>Start Personal Interview</button></Link>\n    </div>\n   )\n\n }","// import logo from './logo.svg';\nimport io from 'socket.io-client';\nimport {useState, useEffect, useRef} from \"react\";\nimport Peer from \"peerjs\";\nimport axios from \"axios\";\n\nconst baseUrl = \"http://localhost:4200\";\nconst socket = io(baseUrl);\nconst myPeer = new Peer(undefined);\n\nfunction PI() {\n    const myStream = useRef(null);\n    const myVideoRef = useRef();\n    const otherVideoRef = useRef();\n    const [userId, setUserId] = useState(null);\n    const [file, setFile] = useState(null);\n    const [receivedFiles, setReceivedFiles] = useState([]);\n\n\n    useEffect(() => {\n        myPeer.on('open', id => {\n            console.log(\"Curr user\", id);\n            socket.emit('join-room', 1, id);\n        });\n\n        navigator.mediaDevices.getUserMedia({audio: true, video: { facingMode: \"user\" } })\n            .then(function(stream) {\n                myStream.current = stream;\n                myVideoRef.current.srcObject = stream;\n                myVideoRef.current.play();\n            })\n            .catch(function(err) {\n                alert(\"There is an error accessing your camera and microphone. If you have not given permissions, please reload and do the needful, it is mandatory.\");\n            });\n\n        socket.on('user-connected', id => {  // A new user has joined the room\n            setUserId(id);\n            console.log(\"user aya h\", id);\n        });\n\n        socket.on('user-disconnected', userId => {\n            alert(\"User - \" + userId + \" disconnected\");\n            setUserId(null);\n            otherVideoRef.current.pause();\n            otherVideoRef.current.src = \"\";\n        });\n\n        socket.on('file-received', filename => {\n            console.log(receivedFiles, filename);\n            setReceivedFiles(filename);\n        });\n\n        myPeer.on('call', call => {\n            const answerCall = window.confirm(\"Do you want to answer?\");\n            if (answerCall) {\n                console.log(\"Answering a call\");\n                call.answer(myStream.current);\n\n                call.on('stream', stream => {\n                    otherVideoRef.current.srcObject = stream;\n                    otherVideoRef.current.play()\n                        .catch(err => console.error(err));\n                });\n            } else {\n                console.log(\"Called denied\");\n            }\n        });\n\n    }, []);\n\n\n    const Call = () => {\n        // Make a peerJs call and send them our stream\n        console.log(\"Calling\", userId);\n        const call = myPeer.call(userId, myStream.current);\n\n        // Receive their stream\n        call.on('stream', stream => {\n            otherVideoRef.current.srcObject = stream;\n            otherVideoRef.current.play()\n                .catch(err => console.error(err));\n        });\n    }\n\n    const onChangeHandler = event => {\n        setFile(event.target.files[0]);\n    }\n\n    const handleDocumentUpload = event => {\n        event.preventDefault();\n        const data = new FormData();\n        data.append('file', file);\n\n        fetch('/file-upload', {\n            method: 'POST',\n            body: data\n        })\n            .then(res => res.json())\n            .then(res => socket.emit('file-uploaded', res.filename))\n            .catch(err => console.error(err));\n    }\n\n    const callButton = () => {\n        if (userId) {\n            return (\n                <div>\n                    <button onClick={Call}>Call Agent</button>\n                    <hr/>\n                    <header><h2>Upload Documents</h2></header>\n                    <form onSubmit={handleDocumentUpload} encType=\"multipart/form-data\">\n                        <input type=\"file\" name=\"file\" onChange={onChangeHandler}/>\n                        <button type=\"submit\">Submit</button>\n                    </form>\n                </div>\n\n            );\n        } else {\n            return <></>\n        }\n    }\n\n    const handleDownload = () => {\n        axios({\n            method: 'get',\n            url: '/download/?path='+receivedFiles,\n            responseType: 'blob',\n            headers: {},\n        })\n            .then((res) => {\n                const url = window.URL.createObjectURL(new Blob([res.data]));\n                const link = document.createElement('a');\n                link.href = url;\n                link.setAttribute('download', receivedFiles);\n                document.body.appendChild(link);\n                link.click();\n            })\n            .catch((error) => {\n                alert(error);\n            });\n    }\n\n    const showReceivedFiles = () => {\n        console.log(\"received files are, \", receivedFiles);\n        if (receivedFiles.length === 0) return<></>;\n        return (\n            <div>\n                <p> Received File - <button onClick={handleDownload}>Download</button> </p>\n            </div>\n        )\n    }\n\n    return (\n        <div>\n            <video muted={true} ref = {myVideoRef} style={{width: 400, height: 280}} />\n            <video ref = {otherVideoRef} style={{width: 750, height: 400}} />\n            {callButton()}\n            {showReceivedFiles()}\n        </div>\n    );\n}\n\nexport default PI;\n","import './App.css';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport { KYC } from './components/KYC';\nimport { Home } from './components/Home';\nimport PI from './components/PI';\n\nimport { withRouter } from 'react-router';\nfunction App() {\n\n\n  return (\n    <Router>\n      <Switch>\n        <Route path='/' exact component={Home}/>\n        <Route path='/kyc' component={KYC}/>\n        <Route path='/pi' component={PI}/>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}